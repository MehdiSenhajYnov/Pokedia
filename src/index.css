@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

/* ─── Default theme (dark-first design) ─── */
@theme {
  --font-heading: "Space Grotesk", system-ui, sans-serif;
  --font-body: "Outfit", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", ui-monospace, monospace;

  /* Background layers — deep blue-night */
  --color-background: oklch(0.18 0.035 275);
  --color-foreground: oklch(0.92 0.01 260);

  /* Cards sit one step above the background */
  --color-card: oklch(0.22 0.04 275);
  --color-card-foreground: oklch(0.92 0.01 260);

  /* Popovers / dropdowns */
  --color-popover: oklch(0.23 0.04 275);
  --color-popover-foreground: oklch(0.92 0.01 260);

  /* Primary accent — coral chaud (Persona 5 style) */
  --color-primary: oklch(0.70 0.18 15);
  --color-primary-foreground: oklch(1 0 0);

  /* Secondary — muted surface */
  --color-secondary: oklch(0.25 0.04 275);
  --color-secondary-foreground: oklch(0.85 0.01 260);

  /* Muted — subtle backgrounds, disabled states */
  --color-muted: oklch(0.23 0.03 275);
  --color-muted-foreground: oklch(0.58 0.03 265);

  /* Accent — hover highlights */
  --color-accent: oklch(0.27 0.045 275);
  --color-accent-foreground: oklch(0.92 0.01 260);

  /* Secondary accent — teal électrique */
  --color-secondary-accent: oklch(0.72 0.14 195);
  --color-glow-secondary: oklch(0.72 0.14 195 / 0.25);

  /* Destructive */
  --color-destructive: oklch(0.55 0.22 25);
  --color-destructive-foreground: oklch(1 0 0);

  /* Success */
  --color-success: oklch(0.60 0.17 145);
  --color-success-foreground: oklch(1 0 0);

  /* Warning */
  --color-warning: oklch(0.75 0.16 70);
  --color-warning-foreground: oklch(0.15 0.02 70);

  /* Borders & inputs */
  --color-border: oklch(0.30 0.035 275 / 0.5);
  --color-input: oklch(0.30 0.035 275 / 0.5);
  --color-ring: oklch(0.70 0.18 15);

  /* Radius */
  --radius: 0.625rem;

  /* Sidebar */
  --color-sidebar: oklch(0.16 0.04 280);
  --color-sidebar-foreground: oklch(0.85 0.01 260);
  --color-sidebar-primary: oklch(0.70 0.18 15);
  --color-sidebar-primary-foreground: oklch(1 0 0);
  --color-sidebar-accent: oklch(0.24 0.045 280);
  --color-sidebar-accent-foreground: oklch(0.92 0.01 260);
  --color-sidebar-border: oklch(0.22 0.02 270 / 0.5);
  --color-sidebar-ring: oklch(0.70 0.18 15);

  /* Chart palette */
  --color-chart-1: oklch(0.70 0.18 15);
  --color-chart-2: oklch(0.72 0.14 195);
  --color-chart-3: oklch(0.75 0.18 65);
  --color-chart-4: oklch(0.65 0.20 290);
  --color-chart-5: oklch(0.68 0.22 340);

  /* Custom glow tokens */
  --color-glow-primary: oklch(0.70 0.18 15 / 0.3);
}

/* ─── Light mode overrides ─── */
@layer base {
  .light {
    --color-background: oklch(0.97 0.01 270);
    --color-foreground: oklch(0.18 0.02 265);

    --color-card: oklch(0.99 0.005 270);
    --color-card-foreground: oklch(0.18 0.02 265);

    --color-popover: oklch(0.99 0.005 270);
    --color-popover-foreground: oklch(0.18 0.02 265);

    --color-primary: oklch(0.62 0.20 15);
    --color-primary-foreground: oklch(1 0 0);

    --color-secondary: oklch(0.94 0.015 270);
    --color-secondary-foreground: oklch(0.30 0.02 265);

    --color-muted: oklch(0.94 0.015 270);
    --color-muted-foreground: oklch(0.50 0.01 260);

    --color-accent: oklch(0.93 0.02 270);
    --color-accent-foreground: oklch(0.18 0.02 265);

    --color-destructive: oklch(0.55 0.22 25);
    --color-destructive-foreground: oklch(1 0 0);

    --color-border: oklch(0.87 0.015 270 / 0.6);
    --color-input: oklch(0.87 0.015 270 / 0.6);

    --color-secondary-accent: oklch(0.55 0.14 195);
    --color-glow-secondary: oklch(0.55 0.14 195 / 0.25);
    --color-ring: oklch(0.62 0.20 15);

    --color-sidebar: oklch(0.96 0.01 270);
    --color-sidebar-foreground: oklch(0.30 0.02 265);
    --color-sidebar-primary: oklch(0.62 0.20 15);
    --color-sidebar-primary-foreground: oklch(1 0 0);
    --color-sidebar-accent: oklch(0.94 0.015 270);
    --color-sidebar-accent-foreground: oklch(0.18 0.02 265);
    --color-sidebar-border: oklch(0.87 0.015 270 / 0.6);
    --color-sidebar-ring: oklch(0.62 0.20 15);

    --color-chart-1: oklch(0.62 0.20 15);
    --color-chart-2: oklch(0.55 0.14 195);
    --color-chart-3: oklch(0.65 0.18 65);
    --color-chart-4: oklch(0.52 0.20 290);
    --color-chart-5: oklch(0.55 0.22 340);

    --color-glow-primary: oklch(0.62 0.20 15 / 0.2);
  }
}

/* ─── Base styles ─── */
@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
    margin: 0;
    background-image: radial-gradient(
      circle,
      color-mix(in oklch, var(--color-foreground) 3%, transparent) 1px,
      transparent 1px
    );
    background-size: 24px 24px;
  }

  /* Smooth color transitions when switching themes */
  *,
  *::before,
  *::after {
    transition:
      background-color 0.2s ease,
      border-color 0.2s ease,
      color 0.15s ease;
  }

  /* Disable transition on scroll to avoid jank */
  *:is(:active, :focus) {
    transition-duration: 0s;
  }
}

/* ─── Typography utility classes ─── */
@layer utilities {
  .font-heading {
    font-family: var(--font-heading);
  }
  .font-body {
    font-family: var(--font-body);
  }
  .font-mono {
    font-family: var(--font-mono);
  }
}

/* ─── Glassmorphism utilities ─── */
@layer utilities {
  .glass {
    background: color-mix(in oklch, var(--color-card) 65%, transparent);
    backdrop-filter: blur(16px) saturate(1.3);
    -webkit-backdrop-filter: blur(16px) saturate(1.3);
  }
  .glass-subtle {
    background: color-mix(in oklch, var(--color-card) 45%, transparent);
    backdrop-filter: blur(10px) saturate(1.2);
    -webkit-backdrop-filter: blur(10px) saturate(1.2);
  }
  .shadow-warm {
    box-shadow:
      0 4px 24px -4px color-mix(in oklch, var(--color-primary) 15%, transparent),
      0 2px 8px -2px color-mix(in oklch, var(--color-primary) 8%, transparent);
  }
  .glow-primary {
    box-shadow: 0 0 20px var(--color-glow-primary);
  }
}

/* ─── Skeleton shimmer ─── */
@layer utilities {
  .skeleton-shimmer {
    position: relative;
    overflow: hidden;
    background: var(--color-muted);
  }
  .skeleton-shimmer::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      color-mix(in oklch, var(--color-foreground) 8%, transparent) 50%,
      transparent 100%
    );
    animation: shimmer 1.8s ease-in-out infinite;
  }
}

/* ─── Keyframes ─── */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

@keyframes glow-pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

@keyframes scale-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* ─── Decorative page glow ─── */
@layer utilities {
  .page-glow::before {
    content: "";
    position: absolute;
    top: -100px;
    right: -100px;
    width: 400px;
    height: 400px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      color-mix(in oklch, var(--color-primary) 8%, transparent),
      transparent 70%
    );
    pointer-events: none;
    z-index: 0;
  }
}

/* ─── Scrollbar — themed, minimal ─── */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-muted-foreground) 25%, transparent);
  border-radius: 9999px;
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--color-muted-foreground) 45%, transparent);
}

/* Hide scrollbar when not hovering (Webkit) */
::-webkit-scrollbar-thumb:not(:hover) {
  background: color-mix(in srgb, var(--color-muted-foreground) 15%, transparent);
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--color-muted-foreground) 25%, transparent) transparent;
}

/* ─── Selection highlight ─── */
::selection {
  background: color-mix(in srgb, var(--color-primary) 30%, transparent);
  color: var(--color-foreground);
}
